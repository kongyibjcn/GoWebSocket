<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <title></title>

    <script type="text/javascript">
	
	
     window.onload = main;

     var ws= null;

    function main() {
	   alert("hello!")
       var oBtn = document.getElementById('btn1');
       oBtn.onclick = OnButton1;
	   ws = new WebSocket('ws://localhost:8000/ws'); 
	   alert(ws) 
     }

    function OnButton1() {	 
	     alert("onButton1")
		 alert(ws)
		 ws.send('hello websocket');
         <!-- ws.onopen = OnOpen;-->
         ws.onmessage = OnMessage;
    }

    function OnOpen(event) {
        ws.send('hello websocket');
    }

    function OnMessage(event) {
          var oTxt = document.getElementById('txt1');
          oTxt.value = event.data;
    };
   </script>
</head>
<body>
    <p><input id="txt1" type="text" /></p>
    <p><input id="btn1" type="button" value="按钮" /></p>
</body>
</html>